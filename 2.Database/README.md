# IMPC Workflow - SQL Scripts and Database Dump

This directory contains the SQL resources used in the IMPC data processing workflow.

### SQL_IMPC_Workflow_FINAL.sql
This is the complete SQL script used on MySQL to:
* Create the database
* Import the data into the database 
* Apply appropriate constraints, indexes, and relationships required to reduce redundancy and for the workflow data to be accurately linked to one another
This is the final executable version of the SQL workflow.

### SQL_IMPC_Workflow_SUPPL_QUERIES.sql
This file contains a series of SQL queries, also to be used on MySQL, applicable to the abovementioned database.
The queries encompass:
* Simple SELECT functions for data exploration
* Investigating significant data
* Retrieving procedure, disease, and parameter data based on a target input value from the raw data
* Supporting downstream visualisation and analysis: query for all information to be used in Rshiny.

##### Querying for a target gene:
This file includes the command required to extract all metadata and raw experimental analysis data from a target gene as the input. 
The command is transferrable across different input values, and the script includes examples and explanation on how to adapt the command for their desired output. 

### SQL_IMPC_Workflow_COLLAB_QUERY.sql
This file is the specific SQL script query to return all desired information requested by the collaborator:
* Gene_symbol
* parameter_name
* parameter_group
* procedure_name
* pvalue
* DO_Disease_name

###  database3.dump
The dabase dump contains:
* The executed IMPC database used in our workflow
* All processed tables after running the final script
* A reproducible database that can be restored to recreate the working environment

### database3_schema.png
Image of the complete database schema generated by the SQL_IMPC_Workflow_FINAL.sql script

##### To restore the dump:
```r
# Create a database in MySQL and then load the dump file into it 
# e.g., 
/usr/local/mysql/bin/mysql -u <user> -p <newDB_name> < database3.dump 
```

## Use Guidance
1. Set up a MySQL database
2. Run SQL_IMPC_Workflow_FINAL.sql to create the schema from the start
   - Note: The paths will need to be altered to fit user function
   - Alternatively: Restore the database3.dump for quick use of the pre-populated database
3. Use SQL_IMPC_Workflow_QUERIES.sql as examples of interacting with the database and querying



